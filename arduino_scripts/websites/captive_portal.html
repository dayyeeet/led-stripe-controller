<!DOCTYPE html>
<!-- saved from url=(0079)https://www.smartlab.at/implement-an-esp32-hot-spot-that-runs-a-captive-portal/ -->
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<!-- Dynatrace -->
		<script type="text/javascript" async="" src="./captive_portal_files/recaptcha__de.js.Download" crossorigin="anonymous" integrity="sha384-8wwuePjyG2A6otkuWzPgPEMEv6RCRf8o7bt60UkSM+o5JkrOesIIctjJf5q3N0QX"></script><script type="text/javascript" async="" src="./captive_portal_files/analytics.js.Download"></script><script type="text/javascript" src="./captive_portal_files/46d96a25efa26ac6_complete.js.Download" crossorigin="anonymous"></script>
		
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async="" src="./captive_portal_files/js"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'UA-71876605-1');
		</script>

		
		<link rel="apple-touch-icon" sizes="180x180" href="https://www.smartlab.at/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="https://www.smartlab.at/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://www.smartlab.at/favicon-16x16.png">
		<link rel="manifest" href="https://www.smartlab.at/site.webmanifest">
		
		
					
			<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Implement an ESP32 hot spot that runs a captive portal – Smartlab</title>
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="Smartlab » Feed" href="https://www.smartlab.at/feed/">
<link rel="alternate" type="application/rss+xml" title="Smartlab » Comments Feed" href="https://www.smartlab.at/comments/feed/">
<script>
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.smartlab.at\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.0.1"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode,e=(p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0),i.toDataURL());return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([129777,127995,8205,129778,127999],[129777,127995,8203,129778,127999])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script><script src="./captive_portal_files/wp-emoji-release.min.js.Download" type="text/javascript" defer=""></script>
<style>
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="wp-block-library-css" href="./captive_portal_files/style.min.css" media="all">
<style id="global-styles-inline-css">
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel="stylesheet" id="stripe-handler-ng-style-css" href="./captive_portal_files/public.css" media="all">
<link rel="stylesheet" id="marianne-stylesheet-css" href="./captive_portal_files/style.min(1).css" media="all">
<script src="./captive_portal_files/jquery.min.js.Download" id="jquery-core-js"></script>
<script src="./captive_portal_files/jquery-migrate.min.js.Download" id="jquery-migrate-js"></script>
<link rel="https://api.w.org/" href="https://www.smartlab.at/wp-json/"><link rel="alternate" type="application/json" href="https://www.smartlab.at/wp-json/wp/v2/posts/9234"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.smartlab.at/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.smartlab.at/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 6.0.1">
<link rel="canonical" href="https://www.smartlab.at/implement-an-esp32-hot-spot-that-runs-a-captive-portal/">
<link rel="shortlink" href="https://www.smartlab.at/?p=9234">
<link rel="alternate" type="application/json+oembed" href="https://www.smartlab.at/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.smartlab.at%2Fimplement-an-esp32-hot-spot-that-runs-a-captive-portal%2F">
<link rel="alternate" type="text/xml+oembed" href="https://www.smartlab.at/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.smartlab.at%2Fimplement-an-esp32-hot-spot-that-runs-a-captive-portal%2F&amp;format=xml">

<!-- BEGIN recaptcha, injected by plugin wp-recaptcha-integration  -->

<!-- END recaptcha -->
<link rel="icon" href="https://www.smartlab.at/wp-content/uploads/2022/06/cropped-android-chrome-512x512-1-32x32.png" sizes="32x32">
<link rel="icon" href="https://www.smartlab.at/wp-content/uploads/2022/06/cropped-android-chrome-512x512-1-192x192.png" sizes="192x192">
<link rel="apple-touch-icon" href="https://www.smartlab.at/wp-content/uploads/2022/06/cropped-android-chrome-512x512-1-180x180.png">
<meta name="msapplication-TileImage" content="https://www.smartlab.at/wp-content/uploads/2022/06/cropped-android-chrome-512x512-1-270x270.png">
	<style type="text/css">.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q{display:block!important;border:1px solid #cdcfd2!important;background-color:#fff!important;color:#373a3d!important;width:100vw!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-24GeGuJgk9LrMLp7qVvlyz{background:#6a7e89!important;color:#fff!important;padding:10px!important;font-size:18px!important;font-family:sans-serif!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-KVjdulkCFfUZps29EbgAC{background:#f3f6f8!important;border-bottom:1px solid #cdcfd2!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-KVjdulkCFfUZps29EbgAC>*{margin-right:10px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-1OeZ2PQ98oAp6Vc5mMc6V5{list-style:none!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-vCwYmWF_l83ScZBrGnRoi,.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-1OeZ2PQ98oAp6Vc5mMc6V5{margin:0!important;padding:0!important;width:100%!important;display:block!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-vCwYmWF_l83ScZBrGnRoi:not(:last-child){border-bottom:1px solid #cdcfd2!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-1XQZkb-FlHWABUp4_uShaZ{color:inherit!important;cursor:pointer!important;width:100%!important;display:inline-block!important;margin:10px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-1XTzMvb2XKitWz0mFLlyyp{margin:5px!important;display:block!important;width:auto!important;white-space:pre!important;overflow-x:scroll!important;background:inherit!important;color:inherit!important;font-family:monospace}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-1XTzMvb2XKitWz0mFLlyyp:not(.IN-74a7d7b0-81d1-4475-af64-727c42231d82-39QUvFFn5B7GMcqMQkOXZ3){display:none!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-295DY3nO0DbJWMsOqmjCli{background:#f5f5f5!important;color:#5a5a5a!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1aQZwu6CUzAf2zUcI7tg0Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-295DY3nO0DbJWMsOqmjCli{display:none!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-38EPFyKXMtoP12rPlmrHxs{background:#e6f7ff!important;color:#006097!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3W4ZnQjhoGfT1gTNcqRXdi .IN-74a7d7b0-81d1-4475-af64-727c42231d82-38EPFyKXMtoP12rPlmrHxs{display:none!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-HGYnfzlmgOZ-l7eANhQe_{background:#fff3ea!important;color:#993a00!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q.IN-74a7d7b0-81d1-4475-af64-727c42231d82-24e52A11B1UIErbKHtBmqc .IN-74a7d7b0-81d1-4475-af64-727c42231d82-HGYnfzlmgOZ-l7eANhQe_{display:none!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q .IN-74a7d7b0-81d1-4475-af64-727c42231d82-jji74ZzulHScD0OAD_G7h{background:#fef2f1!important;color:#b10823!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3npS60y-EvfF7G_lioSx2Q.IN-74a7d7b0-81d1-4475-af64-727c42231d82-28jAOA7cDee-95LvwGsOP- .IN-74a7d7b0-81d1-4475-af64-727c42231d82-jji74ZzulHScD0OAD_G7h{display:none!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu{background-color:#0073b1!important;border:0!important;border-radius:2px!important;box-sizing:border-box!important;color:#fff!important;cursor:pointer!important;display:inline-block!important;font-family:-apple-system,system-ui,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Fira Sans,Ubuntu,Oxygen,Oxygen Sans,Cantarell,Droid Sans,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Lucida Grande,Helvetica,Arial,sans-serif!important;font-weight:600!important;overflow:hidden!important;outline-width:2px!important;position:relative!important;text-align:center!important;text-decoration:none!important;vertical-align:middle!important;white-space:nowrap!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu:disabled{cursor:not-allowed!important;opacity:.7!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu:not(:disabled):not(.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1zhzkayakwEXovVYUbq5Gy):hover{background-color:#006097!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu:not(:disabled):not(.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1zhzkayakwEXovVYUbq5Gy):active{background-color:#004b7c!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1zhzkayakwEXovVYUbq5Gy{background-color:#fff!important;color:#0073b1!important;box-shadow:inset 0 0 0 1px rgba(0,0,0,.3)!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1zhzkayakwEXovVYUbq5Gy:not(:disabled):hover{color:#006097!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1zhzkayakwEXovVYUbq5Gy:not(:disabled):active{color:#004b7c!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu>xdoor-icon{display:inline-block!important;height:100%!important;vertical-align:top!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu>xdoor-icon>svg{pointer-events:none!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-7inSbaAsvG5bf7w6lJTEr{font-size:10px!important;height:16px!important;line-height:16px!important;padding:0 6px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-7inSbaAsvG5bf7w6lJTEr>xdoor-icon{margin-left:-6px!important;margin-right:3px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-7inSbaAsvG5bf7w6lJTEr>xdoor-icon>svg{height:16px!important;width:16px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-7inSbaAsvG5bf7w6lJTEr.IN-74a7d7b0-81d1-4475-af64-727c42231d82-2lrEjt4SOTxqrYsv1piG4c>xdoor-icon{margin-right:-6px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu,.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3uCBSbQNVNf2QjqHe1rfb6{font-size:11px!important;height:20px!important;line-height:20px!important;padding:0 7px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3uCBSbQNVNf2QjqHe1rfb6>xdoor-icon,.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu>xdoor-icon{margin-left:-7px!important;margin-right:3.5px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3uCBSbQNVNf2QjqHe1rfb6>xdoor-icon>svg,.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu>xdoor-icon>svg{height:20px!important;width:20px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-3uCBSbQNVNf2QjqHe1rfb6.IN-74a7d7b0-81d1-4475-af64-727c42231d82-2lrEjt4SOTxqrYsv1piG4c>xdoor-icon,.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-2lrEjt4SOTxqrYsv1piG4c>xdoor-icon{margin-right:-7px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-21Smv9YG-5V6M6KP-5v2WG{font-size:14px!important;height:24px!important;line-height:24px!important;padding:0 12px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-21Smv9YG-5V6M6KP-5v2WG>xdoor-icon{margin-left:-12px!important;margin-right:6px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-21Smv9YG-5V6M6KP-5v2WG>xdoor-icon>svg{height:24px!important;width:24px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-21Smv9YG-5V6M6KP-5v2WG.IN-74a7d7b0-81d1-4475-af64-727c42231d82-2lrEjt4SOTxqrYsv1piG4c>xdoor-icon{margin-right:-12px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1TGdQUTLZdNG4R87OfAB-q{font-size:16px!important;height:32px!important;line-height:32px!important;padding:0 16px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1TGdQUTLZdNG4R87OfAB-q>xdoor-icon{margin-left:-16px!important;margin-right:8px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1TGdQUTLZdNG4R87OfAB-q>xdoor-icon>svg{height:32px!important;width:32px!important}.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu.IN-74a7d7b0-81d1-4475-af64-727c42231d82-1TGdQUTLZdNG4R87OfAB-q.IN-74a7d7b0-81d1-4475-af64-727c42231d82-2lrEjt4SOTxqrYsv1piG4c>xdoor-icon{margin-right:-16px!important}</style><script charset="utf-8" src="./captive_portal_files/button.b1b167848c287659f2a6ccf2f75db0b5.js.Download"></script></head>

		<body class="post-template-default single single-post postid-9234 single-format-standard wp-embed-responsive font-family-sans-serif font-size-120 color-scheme-light link-hover-blue font-smooth">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-dark-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0 0.49803921568627"></fefuncr><fefuncg type="table" tableValues="0 0.49803921568627"></fefuncg><fefuncb type="table" tableValues="0 0.49803921568627"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0 1"></fefuncr><fefuncg type="table" tableValues="0 1"></fefuncg><fefuncb type="table" tableValues="0 1"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0.54901960784314 0.98823529411765"></fefuncr><fefuncg type="table" tableValues="0 1"></fefuncg><fefuncb type="table" tableValues="0.71764705882353 0.25490196078431"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-red"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0 1"></fefuncr><fefuncg type="table" tableValues="0 0.27843137254902"></fefuncg><fefuncb type="table" tableValues="0.5921568627451 0.27843137254902"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-midnight"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0 0"></fefuncr><fefuncg type="table" tableValues="0 0.64705882352941"></fefuncg><fefuncb type="table" tableValues="0 1"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-magenta-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0.78039215686275 1"></fefuncr><fefuncg type="table" tableValues="0 0.94901960784314"></fefuncg><fefuncb type="table" tableValues="0.35294117647059 0.47058823529412"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-green"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0.65098039215686 0.40392156862745"></fefuncr><fefuncg type="table" tableValues="0 1"></fefuncg><fefuncb type="table" tableValues="0.44705882352941 0.4"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-orange"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></fecolormatrix><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tableValues="0.098039215686275 1"></fefuncr><fefuncg type="table" tableValues="0 0.66274509803922"></fefuncg><fefuncb type="table" tableValues="0.84705882352941 0.41960784313725"></fefuncb><fefunca type="table" tableValues="1 1"></fefunca></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"></fecomposite></filter></defs></svg>
		<a class="skip-link screen-reader-text" href="https://www.smartlab.at/implement-an-esp32-hot-spot-that-runs-a-captive-portal/#content">Skip to content</a>

				<div id="page" class="site page-width-720">

						<header id="header" class="site-header site-header-align-left" role="banner">
				
					<p class="site-title site-title-weight-normal">
				<a href="https://www.smartlab.at/">
					Smartlab				</a>
			</p>
		
		
					<p class="site-description text-secondary site-desc-style-normal site-desc-weight-thin">
				Smart systems, makers and technology			</p>
		
						<div class="site-social site-social-square">
					<ul class="social-links list-inline">
															<li>
										
										<a href="https://twitter.com/wolfgangb33r" target="_self" aria-label="Link to Twitter">
											<div class="social-icon-container">
												<svg xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Twitter icon" width="16" height="16" class="feather feather-twitter" viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>											</div>
										</a>
									</li>
																	<li>
										
										<a href="https://www.linkedin.com/in/wolfgangb33r/" target="_self" aria-label="Link to Linkedin">
											<div class="social-icon-container">
												<svg xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Linkedin icon" width="16" height="16" class="feather feather-linkedin" viewBox="0 0 24 24"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>											</div>
										</a>
									</li>
																	<li>
										
										<a href="https://github.com/wolfgangB33r" target="_self" aria-label="Link to Github">
											<div class="social-icon-container">
												<svg xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Github icon" width="16" height="16" class="feather feather-github" viewBox="0 0 24 24"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>											</div>
										</a>
									</li>
																	<li>
										
										<a href="https://www.smartlab.at/feed/" target="_self" aria-label="Link to the RSS feed">
											<div class="social-icon-container">
												<svg xmlns="http://www.w3.org/2000/svg" role="img" aria-label="RSS icon" width="16" height="16" class="feather feather-rss" viewBox="0 0 24 24"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>											</div>
										</a>
									</li>
													</ul>
				</div>
							<nav id="menu-primary-container" class="button" role="navigation" aria-label="Primary Menu">
					<button id="menu-mobile-button" onclick="marianneAriaExpand(this)">Menu</button>

					<ul id="menu-primary" class="navigation-menu"><li id="menu-item-837" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-837"><a href="http://www.smartlab.at/" role="menu-item" tabindex="0">Home</a></li><li id="menu-item-5180" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-5180"><a target="_blank" rel="noopener" href="https://tabshop.smartlab.at/" role="menu-item" tabindex="0">TabShop</a></li><li id="menu-item-6373" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6373"><a href="https://www.smartlab.at/books/" role="menu-item" tabindex="0">Books</a></li><li id="menu-item-6374" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6374"><a href="https://www.smartlab.at/proceedings/" role="menu-item" tabindex="0">Proceedings</a></li><li id="menu-item-9272" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-9272"><a href="https://www.smartlab.at/mobilevnc/" role="menu-item" tabindex="0">MobileVNC</a></li><li id="menu-item-851" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-851"><a href="https://www.smartlab.at/imprint/" role="menu-item" tabindex="0">Imprint</a></li><li id="menu-item-search" class="menu-item"><button id="header-search-button" class="button-inline button-expand" aria-haspopup="true" aria-expanded="false">Search<span class="screen-reader-text">Open the search form</span></button></li></ul>				</nav>
			
					
			<div id="header-search-with-menu" class="header-search-box">
				<form role="search" aria-label="Search the site" method="get" class="search-form" action="https://www.smartlab.at/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search …" value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="Search">
			</form>			</div>
		
					</header>

<div id="content" class="site-content">
	<main id="primary" class="site-primary" role="main">
		
<article id="post-9234" class="entry-single post-9234 post type-post status-publish format-standard has-post-thumbnail hentry category-coding category-electronics tag-arduino tag-esp32 tag-wifi">
	<header class="entry-header">
		
					<time class="entry-meta entry-date post-date text-secondary" datetime="2022-02-12T17:24:55+01:00">February 12, 2022</time>
						<ul class="list-inline entry-meta entry-categories text-secondary">
											<li>
							<a href="https://www.smartlab.at/category/coding/">coding</a>
						</li>
											<li>
							<a href="https://www.smartlab.at/category/electronics/">electronics</a>
						</li>
									</ul>
			<h1 class="entry-title post-title">Implement an ESP32 hot spot that runs a captive portal</h1>				<figure class="entry-thumbnail post-thumbnail">
											<img width="720" height="199" src="./captive_portal_files/esp8266-720x199.png" class="attachment-marianne-thumbnails size-marianne-thumbnails wp-post-image" alt="" srcset="https://www.smartlab.at/wp-content/uploads/2022/05/esp8266-720x199.png 720w, https://www.smartlab.at/wp-content/uploads/2022/05/esp8266-300x83.png 300w, https://www.smartlab.at/wp-content/uploads/2022/05/esp8266-768x212.png 768w, https://www.smartlab.at/wp-content/uploads/2022/05/esp8266.png 1000w" sizes="(max-width: 720px) 100vw, 720px">					
									</figure>
				</header>

		<section class="entry-content post-content text-align-justify print-url-show">
		
<p>You know that kind of public wlan hotspots at hotels, coffee shops or other businesses that offer wifi access but you need to accept their terms of service?</p>



<p>The technique of offering a consensus Web page right when you initially connect to an open wifi is called a ‘captive portal’.</p>



<p>A captive portal forces an http client to first visit a dedicated web page asking the user to either login, share their email or to simply consent to the hotspots terms of service.</p>



<p>This technique intercepts any request no matter to which Web address your http client intends to navigate to and redirects the client to show the captive page instead.</p>



<p>The technique of using a captive portal can also be used on a low cost ESP32 or ESP8266 wifi controller board to show a welcome Web page or to show some sort of automatically delivered message.</p>



<p>The remainder of this blog post shows how to set up and run a captive portal on your ESP controller board and how to redirect to a welcome Web page.</p>



<h2><strong>Set up a software access point</strong></h2>



<p>As a first step, we will implement and run a software access point on the esp controller board. For that purpose you download the Arduino development studio and you create a new project as it is shown below.</p>



<p>The setup routine is called once when your controller board powers up and the loop is continuously executed as a main routine of your controller:</p>



<pre class="wp-block-code"><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// put your setup code here, to run once:</span>

}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// put your main code here, to run repeatedly:</span>

}</code></pre>



<p>Now let’s put some code inside those routines to mimic a software access point on our controller board. As we want to offer an open wifi network, we don’t use any wifi password in the setup call.</p>



<pre class="wp-block-code"><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;WiFiClient.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ESP8266WebServer.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;DNSServer.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ESP8266mDNS.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> SSID</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SSID <span class="hljs-meta-string">"open"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>

<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *softAP_ssid = SSID;

<span class="hljs-comment">// The access points IP address and net mask</span>
<span class="hljs-comment">// It uses the default Google DNS IP address 8.8.8.8 to capture all </span>
<span class="hljs-comment">// Android dns requests</span>
<span class="hljs-function">IPAddress <span class="hljs-title">apIP</span><span class="hljs-params">(<span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>)</span></span>;
<span class="hljs-function">IPAddress <span class="hljs-title">netMsk</span><span class="hljs-params">(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  delay(<span class="hljs-number">1000</span>);
  Serial.begin(<span class="hljs-number">9600</span>);
  Serial.println();
  Serial.println(<span class="hljs-string">"Configuring access point..."</span>);
  WiFi.softAPConfig(apIP, apIP, netMsk);
  <span class="hljs-comment">// its an open WLAN access point without a password parameter</span>
  WiFi.softAP(softAP_ssid);
  delay(<span class="hljs-number">1000</span>);
  Serial.print(<span class="hljs-string">"AP IP address: "</span>);
  Serial.println(WiFi.softAPIP());

}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// put your main code here, to run repeatedly:</span>

}</code></pre>



<p>Now we configure a DNS server to redirect all network requests towards our own controller’s address:</p>



<pre class="wp-block-code"><code class="hljs java"><span class="hljs-comment">// DNS server </span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">byte</span> DNS_PORT = <span class="hljs-number">53</span>; 
DNSServer dnsServer;</code></pre>



<p>Within our setup routine we add the initialization of the local DNS server, as it is shown below:</p>



<pre class="wp-block-code"><code class="hljs css"><span class="hljs-selector-tag">dnsServer</span><span class="hljs-selector-class">.setErrorReplyCode</span>(<span class="hljs-selector-tag">DNSReplyCode</span><span class="hljs-selector-pseudo">::NoError)</span>; 
<span class="hljs-selector-tag">dnsServer</span><span class="hljs-selector-class">.start</span>(<span class="hljs-selector-tag">DNS_PORT</span>, "*", <span class="hljs-selector-tag">apIP</span>);</code></pre>



<p>Once the dns server is started within the setup routine, we have to add the handler call within the loop routine to handle all the incoming dns requests, as it is shown below:</p>



<pre class="wp-block-code"><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// handle all the DNS requests</span>
  dnsServer.processNextRequest();
}
</code></pre>



<p>After this first exercise, you can already compile and flash your code to your controller board and once its running you will find a new wifi network named ‘open’, as it is shown below:</p>



<figure class="wp-block-image size-large"><a href="https://www.smartlab.at/wp-content/uploads/2022/02/wifi.png"><img loading="lazy" width="1024" height="978" src="./captive_portal_files/wifi-1024x978.png" alt="" class="wp-image-9235" srcset="https://www.smartlab.at/wp-content/uploads/2022/02/wifi-1024x978.png 1024w, https://www.smartlab.at/wp-content/uploads/2022/02/wifi-300x286.png 300w, https://www.smartlab.at/wp-content/uploads/2022/02/wifi-768x733.png 768w, https://www.smartlab.at/wp-content/uploads/2022/02/wifi-720x687.png 720w, https://www.smartlab.at/wp-content/uploads/2022/02/wifi.png 1080w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<h2><strong>Set up a local Webserver</strong></h2>



<p>After successfully running a wifi access point on your controller and configuring a local DNS to redirect every request to your local IP address, we further need to offer a local Web server that shows a default welcome page at HTTP port 80.</p>



<p>First we declare the Web server as a global variable, as it is shown below:</p>



<pre class="wp-block-code"><code class="hljs objectivec"><span class="hljs-comment">// Web server ESP8266WebServer server(80);</span></code></pre>



<p>Now we go back to our setup routine and add the initialization code for our web server, as it is shown below:</p>



<pre class="wp-block-code"><code class="hljs cs"><span class="hljs-comment">// Setup the web server </span>
server.<span class="hljs-keyword">on</span>(<span class="hljs-string">"/"</span>, handleRoot);
server.<span class="hljs-keyword">on</span>(<span class="hljs-string">"/generate_204"</span>, handleRoot);
server.onNotFound(handleNotFound);
server.begin(); <span class="hljs-comment">// Web server start</span>
Serial.println(<span class="hljs-string">"HTTP server started"</span>);</code></pre>



<p>The handleRoot routine, simply returns a hello world web page, as it is shown below:</p>



<pre class="wp-block-code"><code class="hljs javascript"><span class="hljs-keyword">void</span> handleRoot() {
  <span class="hljs-keyword">if</span> (captivePortal()) { 
    <span class="hljs-keyword">return</span>;
  }
  server.sendHeader(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"no-cache, no-store, must-revalidate"</span>);
  server.sendHeader(<span class="hljs-string">"Pragma"</span>, <span class="hljs-string">"no-cache"</span>);
  server.sendHeader(<span class="hljs-string">"Expires"</span>, <span class="hljs-string">"-1"</span>);

  <span class="hljs-built_in">String</span> p;
  p += F(
            <span class="hljs-string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;"</span>
            <span class="hljs-string">"&lt;h1&gt;HELLO WORLD!!&lt;/h1&gt;"</span>);
  p += F(<span class="hljs-string">"&lt;/body&gt;&lt;/html&gt;"</span>);

  server.send(<span class="hljs-number">200</span>, <span class="hljs-string">"text/html"</span>, p);
}</code></pre>



<p>The captivePortal routine checks if the incoming request is targeted to our local controllers web server IP. In case it’s not, the address is redirected to the local controller IP.</p>



<pre class="wp-block-code"><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">captivePortal</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span> (!isIp(server.hostHeader())) {
    Serial.println(<span class="hljs-string">"Request redirected to captive portal"</span>);
    server.sendHeader(<span class="hljs-string">"Location"</span>, String(<span class="hljs-string">"http://"</span>) + toStringIp(server.client().localIP()), <span class="hljs-keyword">true</span>);
    server.send(<span class="hljs-number">302</span>, <span class="hljs-string">"text/plain"</span>, <span class="hljs-string">""</span>);   
    server.client().stop(); 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
}</code></pre>



<p>Once the controller board is up and running, it offers a local web server on port 80 that serves a minimalistic hello world web page.</p>



<p>In case a new Wifi client wants to connect to our ‘open’ wifi, the credentials dialog automatically redirects the client to our captive portal, as it is shown below:</p>



<figure class="wp-block-image size-large"><a href="https://www.smartlab.at/wp-content/uploads/2022/02/signin.png"><img loading="lazy" width="1024" height="435" src="./captive_portal_files/signin-1024x435.png" alt="" class="wp-image-9236" srcset="https://www.smartlab.at/wp-content/uploads/2022/02/signin-1024x435.png 1024w, https://www.smartlab.at/wp-content/uploads/2022/02/signin-300x128.png 300w, https://www.smartlab.at/wp-content/uploads/2022/02/signin-768x326.png 768w, https://www.smartlab.at/wp-content/uploads/2022/02/signin-720x306.png 720w, https://www.smartlab.at/wp-content/uploads/2022/02/signin.png 1080w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<figure class="wp-block-image size-large"><a href="https://www.smartlab.at/wp-content/uploads/2022/02/hello.png"><img loading="lazy" width="1024" height="455" src="./captive_portal_files/hello-1024x455.png" alt="" class="wp-image-9237" srcset="https://www.smartlab.at/wp-content/uploads/2022/02/hello-1024x455.png 1024w, https://www.smartlab.at/wp-content/uploads/2022/02/hello-300x133.png 300w, https://www.smartlab.at/wp-content/uploads/2022/02/hello-768x341.png 768w, https://www.smartlab.at/wp-content/uploads/2022/02/hello-720x320.png 720w, https://www.smartlab.at/wp-content/uploads/2022/02/hello.png 1080w" sizes="(max-width: 1024px) 100vw, 1024px"></a></figure>



<h2><strong>Summary</strong></h2>



<p>This blog post showed how to use a simple and cheap esp32 or esp8266 controller board to act as a software access point and to capture all Web requests on a single hello world web page.</p>



<p>This technique is used by millions of open access points world wide to ask the users for credentials or for consensus on their terms of service.</p>



<p>The same technique can easily be used to implement all kinds of self-service IoT scenarios where the device automatically shows a local onboarding page with further explanations.</p>



<p>Without the information of <a href="https://stackoverflow.com/questions/54583818/esp-auto-login-accept-message-by-os-with-redirect-to-page-like-public-wifi-port" target="_blank" rel="noreferrer noopener">eduperez on stackoverflow</a>, this blog post would not have been possible. Many thanks for their inspiring work!</p>



<p>Find the <a rel="noreferrer noopener" href="https://github.com/wolfgangB33r/blogPostMaterial/blob/master/captive-portal/captive-portal.ino" target="_blank">full source code in my github repository</a>.</p>



<p>In case you are also dedicated to Home Assistant based automation and innovative esp32 projects, please read my ebook at Amazon.</p>


<div class="wp-block-image">
<figure class="aligncenter size-large is-resized"><a href="https://www.amazon.com/dp/B08JJ5PYQJ" target="_blank" rel="noreferrer noopener"><img loading="lazy" src="./captive_portal_files/cover_2-1-640x1024.jpg" alt="esp32 automation with home assistant ebook" class="wp-image-9148" width="320" height="512" srcset="https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1-640x1024.jpg 640w, https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1-188x300.jpg 188w, https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1-768x1229.jpg 768w, https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1-960x1536.jpg 960w, https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1-1280x2048.jpg 1280w, https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1-720x1152.jpg 720w, https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1-1440x2304.jpg 1440w, https://www.smartlab.at/wp-content/uploads/2021/12/cover_2-1.jpg 1600w" sizes="(max-width: 320px) 100vw, 320px"></a></figure></div>


<p> </p>
<p></p><script src="./captive_portal_files/in.js.Download" type="text/javascript">lang: en_US</script><span class="IN-widget" data-lnkd-debug="&lt;script type=&quot;IN/Share+init&quot; data-url=&quot;https://www.smartlab.at/implement-an-esp32-hot-spot-that-runs-a-captive-portal/&quot;&gt;&lt;/script&gt;" style="display: inline-block; line-height: 1; vertical-align: bottom; padding: 0px; margin: 0px; text-indent: 0px; text-align: center;"><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: bottom !important; font-size: 1px !important;"><button class="IN-74a7d7b0-81d1-4475-af64-727c42231d82-1G9ISYhSF8XoOmdcl0yKDu"><xdoor-icon aria-hidden="true"><svg viewBox="0 0 24 24" width="24px" height="24px" x="0" y="0" preserveAspectRatio="xMinYMin meet">
      <g style="fill: currentColor">
        <rect x="-0.003" style="fill:none;" width="24" height="24"></rect>
        <path style="" d="M20,2h-16c-1.1,0-2,0.9-2,2v16c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V4C22,2.9,21.1,2,20,2zM8,19h-3v-9h3V19zM6.5,8.8C5.5,8.8,4.7,8,4.7,7s0.8-1.8,1.8-1.8S8.3,6,8.3,7S7.5,8.8,6.5,8.8zM19,19h-3v-4c0-1.4-0.6-2-1.5-2c-1.1,0-1.5,0.8-1.5,2.2V19h-3v-9h2.9v1.1c0.5-0.7,1.4-1.3,2.6-1.3c2.3,0,3.5,1.1,3.5,3.7V19z"></path>
      </g>
    </svg></xdoor-icon>Share</button></span></span> <iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" style="position: static; visibility: visible; width: 73px; height: 20px;" title="Twitter Tweet Button" src="./captive_portal_files/tweet_button.6184048311ebe2b4d9580ce803ab4baa.en.html"></iframe><script async="" src="./captive_portal_files/widgets.js.Download" charset="utf-8"></script>	</section>

			<footer class="entry-footer post-footer">
			<div class="entry-tags post-tags text-secondary">
				Tags: <a href="https://www.smartlab.at/tag/arduino/" rel="tag">arduino</a>, <a href="https://www.smartlab.at/tag/esp32/" rel="tag">esp32</a>, <a href="https://www.smartlab.at/tag/wifi/" rel="tag">wifi</a>			</div>

						<div id="print-info" class="text-secondary">
				<p>
					Retrieved August 14, 2022 at 10:23 pm (website time).				</p>

										<p>
							Available at: www.smartlab.at/?p=9234						</p>
								</div>
				</footer>
	</article>
		
		
	</main>

	</div>

						<footer class="site-footer text-secondary site-footer-align-left" role="contentinfo">
				
				
				
				
				
<!-- BEGIN recaptcha, injected by plugin wp-recaptcha-integration  -->
<script type="text/javascript">
				function get_form_submits(el){
					var form,current=el,ui,type,slice = Array.prototype.slice,self=this;
					this.submits=[];
					this.form=false;

					this.setEnabled=function(e){
						for ( var s=0;s<self.submits.length;s++ ) {
							if (e) self.submits[s].removeAttribute('disabled');
							else  self.submits[s].setAttribute('disabled','disabled');
						}
						return this;
					};
					while ( current && current.nodeName != 'BODY' && current.nodeName != 'FORM' ) {
						current = current.parentNode;
					}
					if ( !current || current.nodeName != 'FORM' )
						return false;
					this.form=current;
					ui=slice.call(this.form.getElementsByTagName('input')).concat(slice.call(this.form.getElementsByTagName('button')));
					for (var i = 0; i < ui.length; i++) if ( (type=ui[i].getAttribute('TYPE')) && type=='submit' ) this.submits.push(ui[i]);
					return this;
				}
				</script><script type="text/javascript">
		var recaptcha_widgets={};
		function wp_recaptchaLoadCallback(){
			try {
				grecaptcha;
			} catch(err){
				return;
			}
			var e = document.querySelectorAll ? document.querySelectorAll('.g-recaptcha:not(.wpcf7-form-control)') : document.getElementsByClassName('g-recaptcha'),
				form_submits;

			for (var i=0;i<e.length;i++) {
				(function(el){
					var form_submits = get_form_submits(el).setEnabled(false), wid;
					// check if captcha element is unrendered
					if ( ! el.childNodes.length) {
						wid = grecaptcha.render(el,{
							'sitekey':'6LcVtUEUAAAAADSS9QbbdqL8UJ-DcsWYUALECl91',
							'theme':el.getAttribute('data-theme') || 'light'
							,
							'callback' : function(r){ get_form_submits(el).setEnabled(true); /* enable submit buttons */ }
						});
						el.setAttribute('data-widget-id',wid);
					} else {
						wid = el.getAttribute('data-widget-id');
						grecaptcha.reset(wid);
					}
				})(e[i]);
			}
		}

		// if jquery present re-render jquery/ajax loaded captcha elements
		if ( typeof jQuery !== 'undefined' )
			jQuery(document).ajaxComplete( function(evt,xhr,set){
				if( xhr.responseText && xhr.responseText.indexOf('6LcVtUEUAAAAADSS9QbbdqL8UJ-DcsWYUALECl91') !== -1)
					wp_recaptchaLoadCallback();
			} );

		</script><script src="./captive_portal_files/api.js.Download" async="" defer=""></script>
<!-- END recaptcha -->
<link rel="stylesheet" id="hljstheme-css" href="./captive_portal_files/default.css" media="all">
<script id="stripe-handler-ng-js-extra">
var wpASPNG = {"iframeUrl":"https:\/\/www.smartlab.at\/asp-payment-box\/","ppSlug":"asp-payment-box","prefetch":"0","ckey":"7e3cd25ee76f1ca3c51e1bec1f4a9c2a","aspDevMode":"1"};
</script>
<script src="./captive_portal_files/stripe-handler-ng.js.Download" id="stripe-handler-ng-js"></script>
<script src="./captive_portal_files/navigation.min.js.Download" id="marianne-navigation-js"></script>
<script src="./captive_portal_files/highlight.common.pack.js.Download" id="hljs-js"></script>
    <style>code.hljs { /*margin: 5px;*/ }</style>
    <script type="text/javascript">
    (function($, window) {
        var init_fn_flag = false;
        var init_fn = (function() {
            if (init_fn_flag)
                return;
            init_fn_flag = true;
             hljs.configure({"tabReplace":"    "});
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });
        $(document).ready(init_fn);
        $(window).on("load", init_fn);
    })(jQuery, window);
    </script>
			</footer>
		</div><!-- #page -->
	

<iframe scrolling="no" frameborder="0" allowtransparency="true" src="./captive_portal_files/widget_iframe.6184048311ebe2b4d9580ce803ab4baa.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./captive_portal_files/saved_resource.html"></iframe></body></html>