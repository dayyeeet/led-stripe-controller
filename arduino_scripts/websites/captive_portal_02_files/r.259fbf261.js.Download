(window.ryviuWebpack=window.ryviuWebpack||[]).push([["RyviuWidgetTotal","Ryviu22","WriteRyviuEmail"],{"EZa+":function(t,e,i){"use strict";i.r(e);var n=i("yXPU"),s=i.n(n),r=i("lSNA"),a=i.n(r),o=i("o0o1"),l=i.n(o),c=i("gsjm"),d=i("Y+Iv"),g=(i("sykF"),i("L2JU"));function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach(function(e){a()(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var _={name:"RyviuWidgetTotal",data:function(){return{loading:!0,client_settings:d,ratings:{},check:!1}},components:{Stars:c.default},computed:v(v({},Object(g.d)({data_send:function(t){return t.widgetRyviu.data_send},ratingRyviuWidgetTotal:function(t){return t.ratingRyviuWidgetTotal}})),{},{styleWidget:function(){var t={};return"undefined"!=typeof ryviu_global_settings&&void 0!==ryviu_global_settings.review_widget&&void 0!==ryviu_global_settings.review_widget.starHeight&&(t={fontSize:ryviu_global_settings.review_widget.starHeight+"px"}),t},checkShowTotalWidget:function(){return!this.collection||!(!(this.client_settings.design_settings.no_review||this.total>0)||!this.client_settings.design_settings.colection)},reviewTotalTexts:function(){return this.client_settings&&this.client_settings.review_widget&&void 0!==this.client_settings.review_widget.reviewTotalTexts&&this.client_settings.review_widget.reviewTotalTexts&&""!==this.client_settings.review_widget.reviewTotalTexts?this.collection?"":" "+this.client_settings.review_widget.reviewTotalTexts:this.collection?"":" reviews"},reviewTotalText:function(){return this.client_settings&&this.client_settings.review_widget&&void 0!==this.client_settings.review_widget.reviewTotalText&&this.client_settings.review_widget.reviewTotalText&&""!==this.client_settings.review_widget.reviewTotalText?this.collection?"":" "+this.client_settings.review_widget.reviewTotalText:this.collection?"":" review"},avg:function(){return this.ratings&&void 0!==this.ratings.avg?this.ratings.avg:0},total:function(){return this.ratings&&void 0!==this.ratings.total?this.ratings.total:0},showReview:function(){return this.loading}}),props:{handle:"",settings_data:String,reviews_data:String,collection:{type:[Number,String],default:""},product_id:[Number,String]},mounted:function(){var t=this,e=!1;if("undefined"!=typeof ryviu_global_settings&&void 0!==ryviu_global_settings.design_settings&&void 0!==ryviu_global_settings.design_settings.no_lazy_show&&(e=ryviu_global_settings.design_settings.no_lazy_show),"IntersectionObserver"in window&&!e){var i=new IntersectionObserver(function(e,n){e.forEach(function(e){if(e.intersectionRatio>0){t.$store.commit("widgetRyviu/setHanle",{product_id:t.product_id,handle:t.handle,app_settings:t.app_settings});var n=e.target;t.getDataTotalWidget(),i.unobserve(n)}})});i.observe(this.$el)}else this.$store.commit("widgetRyviu/setHanle",{product_id:this.product_id,handle:this.convertHandle(this.handle),app_settings:this.app_settings}),this.getDataTotalWidget()},methods:{scrollToRyviuWidget:function(){if(!this.collection)for(var t=document.querySelectorAll("ryviu-widget"),e=0;e<t.length;e++)if(0!=t[e].offsetHeight||0!=t[e].offsetWidth){t[e].scrollIntoView(!0),window.scrollBy(0,-10);break}},getDataTotalWidget:function(){var t=this;return s()(l.a.mark(function e(){var i,n,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!1,n=!1,t.loading=!1,t.reviews_data&&"{}"!=t.reviews_data&&""!=t.reviews_data.trim()&&(i=!0),"undefined"!=typeof ryviu_global_settings&&ryviu_global_settings&&(n=!0),t.client_settings=n?ryviu_global_settings:d,!i||!n){e.next=11;break}t.getRattings(t.reviews_data),t.ratings&&0==t.ratings.total&&!t.collection&&(t.loading=!0),e.next=35;break;case 11:if(t.reviews_data||t.product_id&&t.convertHandle(t.handle)){e.next=15;break}t.loading=!0,e.next=35;break;case 15:if(!i||"undefined"!=typeof ryviu_global_settings){e.next=20;break}t.getRattings(t.reviews_data),t.ratings&&0==t.ratings.total&&!t.collection&&(t.loading=!0),e.next=35;break;case 20:if(t.$cookies.isKey("token"+t.data_send.domain)&&"true"==t.$cookies.get("token"+t.data_send.domain)&&(check=!0),s=!1,!n){e.next=28;break}if(1!=ryviu_global_settings.design_settings.colection){e.next=28;break}if(s=!0,0!=i||0!=ryviu_global_settings.design_settings.no_review){e.next=28;break}return t.loading=!0,e.abrupt("return");case 28:if(!t.collection||i||!s){e.next=31;break}return t.loading=!1,e.abrupt("return");case 31:if(-1!=t.data_send.domain.indexOf("myshopify")){e.next=34;break}return t.loading=!0,e.abrupt("return");case 34:t.loading=!0;case 35:t.$el.parentElement.removeAttribute("reviews_data");case 36:case"end":return e.stop()}},e)}))()},getRattings:function(t){if(t.indexOf("total")>-1)this.ratings=JSON.parse(this.reviews_data);else{t=t.split(";"),this.ratings={total:t[0]?parseInt(t[0]):0,avg:t[1]?t[1]:0};var e=document.querySelector("ryviu-widget");if(e)e.getAttribute("product_id")==this.product_id&&(this.ratingRyviuWidgetTotal.total=t[0]?parseInt(t[0]):0,this.ratingRyviuWidgetTotal.avg=t[1]?t[1]:0,this.ratingRyviuWidgetTotal.product_id=this.product_id,this.ratingRyviuWidgetTotal.handle=this.handle)}}}},f=(i("Qkfl"),i("KHd+")),w=Object(f.a)(_,function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.checkShowTotalWidget?i("div",{staticClass:"product-widget__ryviu"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"r-wapper-widget"},[i("div",{staticClass:"ryviu-widget-box"},[i("div",{staticClass:"ryviu-item",on:{click:t.scrollToRyviuWidget}},[i("Stars",{attrs:{display:!1,avg:parseFloat(t.avg),client_settings:t.client_settings,widget_total:!0}}),t._v(" "),t.total>0?i("div",{staticClass:"ryviu-number-widget",style:t.styleWidget},[i("span",{staticClass:"trw-avg"},[t._v(t._s(parseFloat(t.avg?t.avg:0).toFixed(1)))]),t._v(" "),i("span",{staticClass:"trw-bracket"},[t._v("(")]),t._v(" "),i("span",{staticClass:"trw-count"},[t._v(t._s(t._f("shortNumber")(t.total)))]),t._v(" "),t.collection?t._e():i("span",{staticClass:"trw-text"},[t._v(t._s(t.total>1?t.reviewTotalTexts:t.reviewTotalText))]),t._v(" "),i("span",{staticClass:"trw-bracket"},[t._v(")")])]):t._e()],1)])]),t._v(" "),i("div",{staticClass:"clr"})]):t._e()},[],!1,null,null,null);e.default=w.exports},"KHd+":function(t,e,i){"use strict";function n(t,e,i,n,s,r,a,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):s&&(l=o?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var g=c.beforeCreate;c.beforeCreate=g?[].concat(g,l):[l]}return{exports:t,options:c}}i.d(e,"a",function(){return n})},Qkfl:function(t,e,i){"use strict";i("XJmL")},XJmL:function(t,e,i){},lSNA:function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.default=t.exports,t.exports.__esModule=!0}}]);